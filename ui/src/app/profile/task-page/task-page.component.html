<div class="task-page-card mx-auto my-5">
  <h2 class="mb-4">Manage Tasks (Mock)</h2>

  <div *ngIf="formError" class="alert alert-danger">{{ formError }}</div>
  <div *ngIf="formSuccess" class="alert alert-success">{{ formSuccess }}</div>

  <form #f="ngForm" (ngSubmit)="addTask(f)" novalidate class="mb-4">
    <div class="field-group mb-2">
      <label for="title">Title</label>
      <input
        id="title"
        name="title"
        type="text"
        class="form-control"
        [(ngModel)]="newTask.title"
        required
        [disabled]="taskLoading"
        placeholder="Task title"
      />
    </div>

    <div class="field-group mb-2">
      <label for="description">Description</label>
      <textarea
        id="description"
        name="description"
        class="form-control"
        [(ngModel)]="newTask.description"
        rows="2"
        [disabled]="taskLoading"
        placeholder="Task description"
      ></textarea>
    </div>

    <div class="field-group mb-3">
      <label for="due_date">Due Date</label>
      <input
        id="due_date"
        name="due_date"
        type="date"
        class="form-control"
        [(ngModel)]="newTask.due_date"
        [disabled]="taskLoading"
      />
    </div>

    <button
      type="submit"
      class="btn-add w-100"
      [disabled]="taskLoading || f.form.invalid"
    >
      {{ taskLoading ? 'Addingâ€¦' : 'Add Task' }}
    </button>
  </form>

  <ul *ngIf="tasks.length; else noTasks" class="list-group">
    <li
      class="list-group-item d-flex justify-content-between align-items-start"
      *ngFor="let task of tasks"
    >
      <div>
        <div class="fw-bold">{{ task.title }}</div>
        <small>{{ task.description }}</small>
        <div *ngIf="task.due_date"><small>Due: {{ task.due_date }}</small></div>
      </div>
      <button
        class="btn-remove"
        (click)="removeTask(task.id)"
        aria-label="Delete task"
      >
        &times;
      </button>
    </li>
  </ul>
  <ng-template #noTasks>
    <div class="text-muted text-center">No tasks added yet.</div>
  </ng-template>
</div>

<div class="task-container">
  <!-- Form Section -->
  <div class="task-form">
    <h2 class="mb-3">Create New Assignment (Mock)</h2>

    <div *ngIf="formError" class="alert alert-danger">{{ formError }}</div>
    <div *ngIf="formSuccess" class="alert alert-success">{{ formSuccess }}</div>

    <form #f="ngForm" (ngSubmit)="addTask(f)" novalidate>
      <div class="field-group mb-2">
        <label for="title">Title</label>
        <input
          id="title"
          name="title"
          type="text"
          class="form-control"
          [(ngModel)]="newTask.title"
          required
          [disabled]="taskLoading"
          placeholder="Assignment title"
        />
      </div>

      <div class="field-group mb-2">
        <label for="description">Description</label>
        <textarea
          id="description"
          name="description"
          class="form-control"
          [(ngModel)]="newTask.description"
          rows="2"
          [disabled]="taskLoading"
          placeholder="Assignment details"
        ></textarea>
      </div>

      <div class="field-group mb-3">
        <label for="due_date">Due Date</label>
        <input
          id="due_date"
          name="due_date"
          type="date"
          class="form-control"
          [(ngModel)]="newTask.due_date"
          [disabled]="taskLoading"
        />
      </div>

      <button
        type="submit"
        class="btn-add w-100"
        [disabled]="taskLoading || f.form.invalid"
      >
        {{ taskLoading ? 'Addingâ€¦' : 'Add Assignment' }}
      </button>
    </form>
  </div>

  <!-- Task List Section -->
  <div class="task-list-wrapper">
    <h2 class="mb-3">Current Assignments</h2>
    <ul *ngIf="tasks.length; else noTasks" class="list-group">
      <li
        class="list-group-item"
        *ngFor="let task of tasks"
      >
        <div>
          <strong>{{ task.title }}</strong>
          <div><small>{{ task.description }}</small></div>
          <div *ngIf="task.due_date"><small>Due: {{ task.due_date }}</small></div>
        </div>
        <button
          class="btn-remove"
          (click)="removeTask(task.id)"
          aria-label="Delete task"
        >
          &times;
        </button>
      </li>
    </ul>
    <ng-template #noTasks>
      <div class="text-muted">No tasks added yet.</div>
    </ng-template>
  </div>
</div>
